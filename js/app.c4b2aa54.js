(function(e){function t(t){for(var s,i,o=t[0],c=t[1],l=t[2],d=0,_=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&_.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(_.length)_.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={app:0},n=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/otan_invest/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0405":function(e,t,a){},"1ae4":function(e,t,a){e.exports=a.p+"img/logo.165d52ce.svg"},"53a2":function(e,t,a){"use strict";a("0405")},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[""==e.sid?a("Loading"):e._e(),""!=e.sid?a("Header",{attrs:{sidVal:e.sid,isLogged:e.isLoggedIn}}):e._e(),a("router-view")],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("div",{staticClass:"container d-flex align-items-center justify-content-between header__main"},[e._m(0),e.isLoggedIn?a("div",{staticClass:"d-flex align-items-center"},[a("p",{staticClass:"header__profileText"},[e._v("Привет, Азамат")]),a("button",{staticClass:"header__profileBtn"})]):e._e()]),a("div",{staticClass:"header__ticker d-flex align-items-center"},[0!=e.marqueeAllData.length?a("marquee",{staticStyle:{width:"100%"}},e._l(e.marqueeData,(function(t){return a("span",{key:t.NAME,staticClass:"ticker__text",class:{marqueeItem_up:t.ISUP}},[a("span",{staticClass:"marqueeItem_name"},[e._v(e._s(t.NAME))]),e._v(" "),a("span",{staticClass:"marqueeItem_value"},[e._v(e._s(t.VAL.toLocaleString("ru")))]),a("span",{staticClass:"marqueeItem_name text-muted",class:{marqueeItem_red:!t.ISUP,marqueeItem_green:t.ISUP}},[e._v(" ("+e._s(t.PERC)+"%)")])])})),0):e._e(),0==e.marqueeAllData.length?a("div",{staticClass:"d-flex"},[a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"}),a("div",{staticClass:"marquee__skeleton"})]):e._e(),a("div",{staticClass:"header__marqueeSelector"},[a("strong",{staticClass:"marqueeSelector__btn",class:{marqueeSelector__btn_active:"indexes"==e.marqueeShow},on:{click:function(t){e.marqueeShow="crypto"}}},[e._v("Криптовалюта")]),a("strong",{staticClass:"marqueeSelector__btn",class:{marqueeSelector__btn_active:"currencies"==e.marqueeShow},on:{click:function(t){e.marqueeShow="currency"}}},[e._v("Валюты")]),a("strong",{staticClass:"marqueeSelector__btn",class:{marqueeSelector__btn_active:"all"==e.marqueeShow},on:{click:function(t){e.marqueeShow="all"}}},[e._v("Все")])])],1)])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container d-flex align-items-center"},[s("a",{attrs:{href:""}},[s("img",{staticClass:"header__logo",attrs:{src:a("1ae4"),alt:""}})]),s("nav",{staticClass:"d-flex align-items-center"},[s("a",{staticClass:"nav__link",attrs:{href:"#/"}},[e._v("Главная")]),s("a",{staticClass:"nav__link",attrs:{href:"#/screener"}},[e._v("Скринер")])])])}],c={props:["sidVal","isLogged"],data(){return{marqueeAllData:[],sid:this.sidVal,isLoggedIn:this.isLogged,tickers:["KSPI.KZ","KZAP.KZ"],marqueeShow:"all"}},computed:{marqueeData(){return"crypto"==this.marqueeShow?this.marqueeAllData.filter(e=>"crypto"==e.TYPE):"currency"==this.marqueeShow?this.marqueeAllData.filter(e=>"currency"==e.TYPE):"all"==this.marqueeShow?this.marqueeAllData:void 0}},methods:{async getData(){const e="wss://wss.tradernet.ru?SID="+this.sid,t=new WebSocket(e);var a=this.tickers;t.onmessage=function(e){const[t,a]=JSON.parse(e.data)},t.onopen=function(){t.send(JSON.stringify(["quotes",a]))};let s=await fetch("https://otan-invest.gdh.kz/api/getMarqueeData"),r=await s.json();for(const n of r)this.marqueeAllData.push(n)}},mounted(){this.getData()}},l=c,u=a("2877"),d=Object(u["a"])(l,i,o,!1,null,null,null),_=d.exports,h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading_wrapper"},[a("div",{staticClass:"iconWrapper d-flex align-items-center"},[a("div",{staticClass:"lds-dual-ring"}),a("h1",{staticClass:"loadingIcon"},[e._v("Otan Invest")])])])}],f=(a("53a2"),{}),p=Object(u["a"])(f,h,m,!1,null,null,null),v=p.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("section",{staticClass:"home__chartsSection"},[a("div",{staticClass:"home__chartsBlock"},e._l(e.charts,(function(t,s){return a("stock-card",{key:s,staticClass:"chartCard",attrs:{xSeries:e.xSeries[s],data:t,info:e.info[s]}})})),1)])])},C=[],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card__wrap"})},q=[],w={props:["data"]},y=w,x=(a("718f"),Object(u["a"])(y,S,q,!1,null,"394d1443",null)),k=x.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home__chartDiv"},[a("div",{staticClass:"d-flex align-items-end"},[a("p",{staticClass:"mb-0 mr-2"},[e._v(e._s(e.info.short_name))])]),a("p",{staticClass:"chartDiv__ticker"},[e._v(e._s(e.info.nt_ticker))]),a("div",{attrs:{id:"chart"}},[e.dataReady?a("apexchart",{attrs:{type:"area",height:"100%",options:e.chartOptions,series:e.series}}):e._e()],1)])},O=[],D={props:["data","xSeries","info"],name:"stockCard",data(){return{dataReady:!1,series:[{name:"Цена",data:[]}],chartOptions:{colors:["#29cc3f"],dataLabels:{enabled:!1},stroke:{curve:"smooth"},grid:{show:!1},legend:{show:!1},tooltip:{theme:"dark",x:{show:!1}},xaxis:{categories:[],lines:{show:!1},labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{show:!1}},yaxis:{lines:{show:!1},labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{show:!1}}}}},async mounted(){for(const e of this.data)this.series[0].data.push(e[3]);for(const e of this.xSeries){let t=new Date(null);t.setSeconds(e);let a=t.toLocaleString("ru").split(",");this.chartOptions.xaxis.categories.push(a[0])}setTimeout(()=>{this.dataReady=!0},500)}},j=D,I=Object(u["a"])(j,b,O,!1,null,null,null),K=I.exports,L={components:{StockCard:K,LargeCard:k},name:"Home",data(){return{charts:[],xSeries:[],info:[]}},async mounted(){let e=new Date,t=e.getFullYear(),a=e.getFullYear()-1,s=e.getMonth()+1;s<10&&(s="0"+s);let r="01."+s+"."+a+" 00:00",n="01."+s+"."+t+" 00:00";var i={cmd:"getHloc",params:{id:"HSBK.KZ,KSPI.KZ,KZTO.KZ,KZTK.KZ,CCBN.KZ,KCEL.KZ",count:0,timeframe:10080,date_from:r,date_to:n,intervalMode:"ClosedRay"}};let o=this,c=new Date;c.setFullYear(e.getFullYear()+1),c.setMonth(e.getMonth()),c.setDate("01");await $.getJSON("https://tradernet.ru/api/",{q:JSON.stringify(i)},(function(e){o.charts=e.hloc,o.xSeries=e.xSeries,o.info=e.info}))}},P=L,E=(a("cccb"),Object(u["a"])(P,g,C,!1,null,null,null)),A=E.exports,M={components:{Header:_,Loading:v,Home:A},data(){return{sid:"",isLoggedIn:!1}},methods:{async getSid(){let e=await fetch("https://otan-invest.gdh.kz/api/getSID"),t=await e.json();this.sid=t}},mounted(){this.getSid()}},T=M,Z=(a("034f"),Object(u["a"])(T,r,n,!1,null,null,null)),N=Z.exports,R=a("8c4f"),H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{attrs:{id:"chart"}},[a("h1",{staticStyle:{color:"#Fff"}},[e._v("Скринер акции")]),a("p",{staticStyle:{color:"#fff"}},[e._v("Изменение в процентах относительно цены закрытия предыдущей торговой сессии")]),e.isReady?a("apexchart",{attrs:{type:"treemap",height:"600",options:e.chartOptions,series:e.series}}):e._e()],1)])},J=[],B={data(){return{isReady:!1,series:[{data:[]}],chartOptions:{legend:{show:!1},dataLabels:{enabled:!0,style:{fontSize:"12px"}},plotOptions:{treemap:{enableShades:!0,shadeIntensity:.1,reverseNegativeShade:!0,colorScale:{ranges:[{from:-7,to:0,color:"#f63538"},{from:.001,to:7,color:"#30cc5a"}]}}}}}},async mounted(){await fetch("https://otan-invest.gdh.kz/api/getScreenerData").then(async e=>{let t=JSON.parse(await e.json());console.log(t.result.q);for(const a of t.result.q){((a.ltp-a.pp)/a.pp*100).toFixed(2);console.log(a.pcp),this.series[0].data.push({x:a.name,y:a.pcp})}this.isReady=!0})}},F=B,Y=(a("5e26"),Object(u["a"])(F,H,J,!1,null,"a94dae2a",null)),z=Y.exports;s["a"].use(R["a"]);const V=[{path:"/",name:"Home",component:A},{path:"/screener",name:"Screener",component:z}],U=new R["a"]({base:"/otan_invest/",routes:V});var W=U,G=a("2f62");s["a"].use(G["a"]);var Q=new G["a"].Store({state:{},mutations:{},actions:{},modules:{}}),X=a("1321"),ee=a.n(X);s["a"].config.productionTip=!1,s["a"].use(ee.a),s["a"].component("apexchart",ee.a),new s["a"]({router:W,store:Q,render:function(e){return e(N)}}).$mount("#app")},5824:function(e,t,a){},"5ced":function(e,t,a){},"5e26":function(e,t,a){"use strict";a("81fd")},"718f":function(e,t,a){"use strict";a("5824")},"81fd":function(e,t,a){},"85ec":function(e,t,a){},cccb:function(e,t,a){"use strict";a("5ced")}});
//# sourceMappingURL=app.c4b2aa54.js.map